<!DOCTYPE html>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css">
<head>
        <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
       <style>
        [v-cloak] {
            display: none;}
        </style>

<div id="app">
    <div class="container">
        <div class=" card mt-5">
        <h2 class="class-header"> Near-Earth Objects </h2>
                <table class="table">
                <thead class="thead-light">
                    <th> # </th>
                    <th> Name </th>
                    <th> Close Approach Date </th>
                    <th> Miss Distance </th>
                    <th> Remove </th>
                </thead>
                <tbody v-cloak>
                    <tr v-for="(a, index) in asteroids">
                        <td>{{index + 1}}</td>
                        <td>{{a.name}}</td>
                        <td>{{closeApproachDate(a)}}</td>
                        <td>
                            <ul>
                                <li v-for="(value, key) in a.close_approach_data[0].miss_distance">
                                        {{key}}: {{value}}
                                </li>
                            </ul>
                        </td>
                        <td><button @click="remove(index)" class="btn btn-warning"> Remove </button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

</head>    
    <script>

       var VM = new Vue({
            el: '#app',
            data: {
                asteroids: []
                },
                created: function () {
                    this.fetchAste ();
                },
            methods: {
                fetchAste: function () {
var apiKEY = 'OJbdd3aTSrXsiLhn9I0M7f1A67kDGpoypGk1khHX';
var apiURL = 'https://api.nasa.gov/neo/rest/v1/neo/browse?api_key=' + apiKEY;
                    axios.get(apiURL)
                        .then(function (res) {
                            VM.asteroids = res.data.near_earth_objects.slice(0,10);
                        });
                },
                closeApproachDate: function (a) {
                        if(a.close_approach_data_length > 0) {
                            return a.close_approach_data[0].close_approach_date;
                        }
                        return 'N/A';
                },
                remove: function (index) {
                    this.asteroids.splice(index, 1);
                }
            }
        });


// NASA API Key
//https://api.nasa.gov/planetary/apod?api_key=OJbdd3aTSrXsiLhn9I0M7f1A67kDGpoypGk1khHX

</script>
